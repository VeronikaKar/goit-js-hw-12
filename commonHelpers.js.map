{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loader = document.querySelector('.loader');\n  \nexport function showMessage(icon, message, bgr) {\n  iziToast.show({\n    iconUrl:icon,\n    titleColor: 'White',\n    titleSize: '24px',\n    message,\n    messageColor: 'White',\n    messageSize: '16px',\n    backgroundColor: bgr,\n    position: 'topRight',\n    timeout: 3000,\n});\n}\n\nexport function showLoader() {\n\n  loader.classList.remove(\"visually-hidden\");\n}\n\nexport function hiddenLoader() { \n\n  loader.classList.add(\"visually-hidden\");\n}\nexport function clearGallery(ref) {\n  \n  ref.innerHTML = '';\n}\nexport function createGalleryMarkup(array) {\n  return array\n    .map(\n      (image) => `<li class=\"gallery-item\">\n    <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery-link\">\n      <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n    </a>\n    <div class=\"gallery-info\">\n      <p><b>Likes:</b> ${image.likes}</p>\n      <p><b>Views:</b> ${image.views}</p>\n      <p><b>Comments:</b> ${image.comments}</p>\n      <p><b>Downloads:</b> ${image.downloads}</p>\n    </div></li>\n  `\n    )\n    .join('');\n} \n","export function searchForm(query, page) {\n    const pixaBay = `https://pixabay.com/api/`;\n    const API_KEY = '43325485-b0026802577d8a210f4fcd054';\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: `photo`,\n        orientation: `horizontal`,\n      safesearch: true,\n      page,\n      per_page: 15,\n    })\n const url = `https://pixabay.com/api/?${params}`;\n    return fetch(url)\n\n    .then(res => {\n   if (!res.ok) {\n      throw new Error(res.status);\n    }\n    return res.json();\n  });\n};","export default \"__VITE_ASSET__3108d0c6__\"","\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { showMessage } from './js/render-functions.js';\nimport { hiddenLoader,showLoader } from './js/render-functions.js';\nimport { searchForm } from './js/pixabay-api.js';\nimport { createGalleryMarkup } from './js/render-functions.js';\nimport { clearGallery } from './js/render-functions.js';\nimport errorIcon from './img/bi_x-octagon.svg'\n\nconst form = document.querySelector('.form');\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector(\".btn-load-more\");\n    const lightbox = new SimpleLightbox('.gallery a', \n{ \n    captions: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n    captionPosition: 'bottom', \n   \n}); \n\n\nform.addEventListener(\"submit\", onSubmit);\nloadMoreBtn.addEventListener(\"click\", onClick);\n\nlet page = 1;\nlet searchQuery = null;\n\nfunction onSubmit(event) {\n    event.preventDefault();\n    const searchQuery = event.currentTarget.search.value.trim();\n    showLoader();\n    loadMoreBtn.classList.add(\"visually-hidden\");\n    clearGallery(gallery);\n    page = 1;\n    searchForm(searchQuery, page)\n        .then(res =>  {\n            if (res.hits.total > 0) {\n                showMessage\n                   (errorIcon, 'Sorry, there are no images matching your search query. Please try again!', '#ef4040');\n                \n            } \n            if (res.hits.length === 0) {\n                return showMessage(errorIcon, 'Sorry,   there are no images matching your search query. Please try again!', '#ef4040');\n            }\n                const galleryMarkup = createGalleryMarkup(res.hits);\n            gallery.innerHTML = galleryMarkup;\n            lightbox.refresh();\n            \n        })\n        .catch(err => {\n            console.error('Error:', err); \n        })\n        .finally(() => {\n            hiddenLoader();\n        });\n}\nfunction onClick() {\n    page += 1;\n    searchForm(searchQuery, page).then((res) => {\n        list.insertAdjacentHTML(\"beforeend\", createGalleryMarkup(res.hits))\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n        const lastPage=Math.ceil(res.hits.total / 15)\n        if (lastPage === page) {\n            loadMoreBtn.classList.add(\"visually-hidden\")\n            showMessage(errorIcon, 'Sorry, there are no images matching your search query. Please try again!', '#ef4040');\n        }\n        \n    })\n  \n}"],"names":["loader","showMessage","icon","message","bgr","iziToast","showLoader","hiddenLoader","clearGallery","ref","createGalleryMarkup","array","image","searchForm","query","page","API_KEY","url","res","errorIcon","form","gallery","loadMoreBtn","lightbox","SimpleLightbox","onSubmit","onClick","searchQuery","event","galleryMarkup","err","cardHeight"],"mappings":"6vBAMA,MAAMA,EAAS,SAAS,cAAc,SAAS,EAExC,SAASC,EAAYC,EAAMC,EAASC,EAAK,CAC9CC,EAAS,KAAK,CACZ,QAAQH,EACR,WAAY,QACZ,UAAW,OACX,QAAAC,EACA,aAAc,QACd,YAAa,OACb,gBAAiBC,EACjB,SAAU,WACV,QAAS,GACb,CAAC,CACD,CAEO,SAASE,GAAa,CAE3BN,EAAO,UAAU,OAAO,iBAAiB,CAC3C,CAEO,SAASO,GAAe,CAE7BP,EAAO,UAAU,IAAI,iBAAiB,CACxC,CACO,SAASQ,EAAaC,EAAK,CAEhCA,EAAI,UAAY,EAClB,CACO,SAASC,EAAoBC,EAAO,CACzC,OAAOA,EACJ,IACEC,GAAU;AAAA,eACFA,EAAM,aAAa;AAAA,wCACMA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,yBAGrDA,EAAM,KAAK;AAAA,yBACXA,EAAM,KAAK;AAAA,4BACRA,EAAM,QAAQ;AAAA,6BACbA,EAAM,SAAS;AAAA;AAAA,GAGvC,EACA,KAAK,EAAE,CACZ,CCnDO,SAASC,EAAWC,EAAOC,EAAM,CAEpC,MAAMC,EAAU,qCAUbC,EAAM,4BATM,IAAI,gBAAgB,CAC/B,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACf,WAAY,GACZ,KAAAC,EACA,SAAU,EAChB,CAAK,CAC0C,GAC3C,OAAO,MAAME,CAAG,EAEf,KAAKC,GAAO,CACd,GAAI,CAACA,EAAI,GACN,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE5B,OAAOA,EAAI,MACf,CAAG,CACH,CCrBA,MAAeC,EAAA,kDCgBTC,EAAO,SAAS,cAAc,OAAO,EAErCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,gBAAgB,EACjDC,EAAW,IAAIC,EAAe,aACxC,CACI,SAAU,GACV,aAAc,IACd,aAAc,MACd,gBAAiB,QAErB,CAAC,EAGDJ,EAAK,iBAAiB,SAAUK,CAAQ,EACxCH,EAAY,iBAAiB,QAASI,CAAO,EAE7C,IAAIX,EAAO,EACPY,EAAc,KAElB,SAASF,EAASG,EAAO,CACrBA,EAAM,eAAc,EACpB,MAAMD,EAAcC,EAAM,cAAc,OAAO,MAAM,OACrDtB,IACAgB,EAAY,UAAU,IAAI,iBAAiB,EAC3Cd,EAAaa,CAAO,EACpBN,EAAO,EACPF,EAAWc,EAAaZ,CAAI,EACvB,KAAKG,GAAQ,CAMV,GALIA,EAAI,KAAK,MAAQ,GACjBjB,EACIkB,EAAW,2EAA4E,SAAS,EAGpGD,EAAI,KAAK,SAAW,EACpB,OAAOjB,EAAYkB,EAAW,6EAA8E,SAAS,EAErH,MAAMU,EAAgBnB,EAAoBQ,EAAI,IAAI,EACtDG,EAAQ,UAAYQ,EACpBN,EAAS,QAAO,CAE5B,CAAS,EACA,MAAMO,GAAO,CACV,QAAQ,MAAM,SAAUA,CAAG,CACvC,CAAS,EACA,QAAQ,IAAM,CACXvB,GACZ,CAAS,CACT,CACA,SAASmB,GAAU,CACfX,GAAQ,EACRF,EAAWc,EAAaZ,CAAI,EAAE,KAAMG,GAAQ,CACxC,KAAK,mBAAmB,YAAaR,EAAoBQ,EAAI,IAAI,CAAC,EACtE,KAAM,CAAE,OAAQa,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EACkB,KAAK,KAAKb,EAAI,KAAK,MAAQ,EAAE,IAC3BH,IACbO,EAAY,UAAU,IAAI,iBAAiB,EAC3CrB,EAAYkB,EAAW,2EAA4E,SAAS,EAGxH,CAAK,CAEL"}