{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/bi_x-octagon.svg","../src/img/gold-svgrepo-com.svg","../src/img/broadcast-svgrepo-com.svg","../src/img/9960966_error_warning_delete_problem_sign_icon.svg","../src/img/loss-svgrepo-com.svg","../src/img/hot-air-balloon-svgrepo-com.svg","../src/main.js"],"sourcesContent":["\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loader = document.querySelector('.loader');\n  \nexport function showMessage(icon, message, bgr) {\n  iziToast.show({\n    iconUrl:icon,\n    titleColor: 'White',\n    titleSize: '24px',\n    message,\n    messageColor: 'White',\n    messageSize: '16px',\n    backgroundColor: bgr,\n    position: 'topRight',\n    timeout: 3000,\n});\n}\n\nexport function showLoader() {\n\n  loader.classList.remove(\"visually-hidden\");\n}\n\nexport function hiddenLoader() { \n\n  loader.classList.add(\"visually-hidden\");\n}\nexport function clearGallery(ref) {\n  \n  ref.innerHTML = '';\n}\nexport function createGalleryMarkup(array) {\n  return array\n    .map(\n      (image) => `<li class=\"gallery-item\">\n    <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery-link\">\n      <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n    </a>\n    <div class=\"gallery-info\">\n      <p><b>Likes:</b> ${image.likes}</p>\n      <p><b>Views:</b> ${image.views}</p>\n      <p><b>Comments:</b> ${image.comments}</p>\n      <p><b>Downloads:</b> ${image.downloads}</p>\n    </div></li>\n  `\n    )\n    .join('');\n} \n","import axios from 'axios'\naxios.defaults.pixaBay = \"https://pixabay.com/api/\";\n\nexport async function searchForm(query, page) {\n   const API_KEY = '43325485-b0026802577d8a210f4fcd054';\n  \n    return await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: `photo`,\n        orintation: `horizontal`,\n        safesearch: true,\n        page,\n        per_page: 15,\n      },\n    });\n  }","export default \"__VITE_ASSET__3108d0c6__\"","export default \"__VITE_ASSET__21f41c7f__\"","export default \"__VITE_ASSET__1b564613__\"","export default \"__VITE_ASSET__6d4b71b9__\"","export default \"__VITE_ASSET__5ae1284d__\"","export default \"__VITE_ASSET__2bd7b783__\"","\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { showMessage } from './js/render-functions.js';\nimport { hiddenLoader,showLoader } from './js/render-functions.js';\nimport { searchForm } from './js/pixabay-api.js';\nimport { createGalleryMarkup } from './js/render-functions.js';\nimport { clearGallery } from './js/render-functions.js';\nimport errorIcon from './img/bi_x-octagon.svg'\nimport successIcon from './img/gold-svgrepo-com.svg'\nimport errorIcon2 from './img/broadcast-svgrepo-com.svg'\nimport errorIcon3 from './img/9960966_error_warning_delete_problem_sign_icon.svg'\nimport errorIcon4 from './img/loss-svgrepo-com.svg'\nimport endIcon from './img/hot-air-balloon-svgrepo-com.svg'\nconst form = document.querySelector('.form');\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector(\".btn-load-more\");\n    const lightbox = new SimpleLightbox('.gallery a', \n{ \n    captions: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n    captionPosition: 'bottom', \n   \n}); \n\n\nform.addEventListener(\"submit\", onSubmit);\nloadMoreBtn.addEventListener(\"click\", onClick);\n\nlet page = 1;\nlet searchQuery = null;\n\nasync function onSubmit(event) {\n    event.preventDefault();\n    searchQuery = event.currentTarget.search.value.trim();\n    showLoader();\n    loadMoreBtn.classList.add(\"visually-hidden\");\n    clearGallery(gallery);\n    page = 1;\n   \n    try {\n        const { data: { hits, totalHits } } = await searchForm(searchQuery, page);\n        if (totalHits > 0) {\n            showMessage\n                (successIcon, `We found ${totalHits} images `, '#32cd32');\n                \n        }\n        if (hits.length === 0) {\n            return showMessage(errorIcon, 'Sorry,   there are no images matching your search query. Please try again!', '#8b0000');\n        }\n        const galleryMarkup = createGalleryMarkup(hits);\n        gallery.innerHTML = galleryMarkup;\n        if (totalHits > 15) {\n            console.log(1);\n            loadMoreBtn.classList.remove(\"visually-hidden\");\n        }\n        lightbox.refresh();\n            \n    }\n    catch (error) {\n        console.log(error.response.status);\n        if (error.response.status === 401) {\n            return showMessage(errorIcon2, 'You are not authorized. Please try again!', '#004242');\n        }\n        if (error.response.status === 404) {\n      \n            return showMessage(errorIcon3, 'You are not authorized. Please try again!', '#b8b8b8');\n        };\n\n        if (error.response.status === 500) {\n            return showMessage(errorIcon4, 'Internal server error. Please try again!', '#5f9ea0');\n        };\n        \n    } finally {\n        hiddenLoader();\n    }\n}\n    //  searchForm(searchQuery, page)\n    //     .then((res) =>  {\n    //         if (res.data.totalHits > 0) {\n    //             showMessage\n    //                (successIcon, `We found ${res.data.totalHits} images `, '#32cd32');\n                \n    //         } \n    //         if (res.data.hits.length === 0) {\n    //             return showMessage(errorIcon, 'Sorry,   there are no images matching your search query. Please try again!', '#8b0000');\n    //         }\n    //             const galleryMarkup = createGalleryMarkup(res.hits);\n    //         gallery.innerHTML = galleryMarkup;\n    //         lightbox.refresh();\n            \n    //     })\n    //     .catch(err => {\n    //         console.error('Error:', err); \n    //     })\n    //     .finally(() => {\n    //         hiddenLoader();\n    //     });\nasync function onClick() {\n    page += 1;\n    try {\n        const { data: { hits, totalHits } } = await searchForm(searchQuery, page);\n        gallery.insertAdjacentHTML(\"beforeend\", createGalleryMarkup(hits))\n        loadMoreBtn.classList.remove(\"visually-hidden\");\n        const { height: cardHeight } = document\n            .querySelector(\".gallery\")\n            .firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n        const lastPage = Math.ceil(totalHits / 15);\n        \n        if (lastPage === page) {\n            loadMoreBtn.classList.add(\"visually-hidden\")\n            showMessage(endIcon, 'Sorry, there are no images.Thats all.', '#96c8a2');\n        }\n    \n    } catch (error) {\n        console.log(error.response.status);\n    } finally {\n        hiddenLoader();\n    }\n}\n        \n    // }\n    // searchForm(searchQuery, page).then((res) => {\n    //     gallery.insertAdjacentHTML(\"beforeend\", createGalleryMarkup(res.hits))\n    //     loadMoreBtn.classList.remove(\"visually-hidden\");\n    // const { height: cardHeight } = document\n    //   .querySelector('.gallery')\n    //   .firstElementChild.getBoundingClientRect();\n\n    // window.scrollBy({\n    //   top: cardHeight * 2,\n    //   behavior: 'smooth',\n    // });\n    //     const lastPage = Math.ceil(res.totalHits / 15);\n        \n    //     if (lastPage === page) {\n    //         loadMoreBtn.classList.add(\"visually-hidden\")\n    //         showMessage(endIcon, 'Sorry, there are no images.Thats all.', '#96c8a2');\n    //     "],"names":["loader","showMessage","icon","message","bgr","iziToast","showLoader","hiddenLoader","clearGallery","ref","createGalleryMarkup","array","image","axios","searchForm","query","page","API_KEY","errorIcon","successIcon","errorIcon2","errorIcon3","errorIcon4","endIcon","form","gallery","loadMoreBtn","lightbox","SimpleLightbox","onSubmit","onClick","searchQuery","event","hits","totalHits","galleryMarkup","error","cardHeight"],"mappings":"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"}